import discord
from discord.ext import commands

TOKEN = "YOUR_BOT_TOKEN"
WEBHOOK_URL = "YOUR_WEBHOOK_URL"  # Create a webhook in your log channel

intents = discord.Intents.default()
intents.messages = True
intents.guilds = True
intents.members = True
intents.message_content = True

bot = commands.Bot(command_prefix="!", intents=intents)

# toggle system
log_config = {
    "messageDelete": True,
    "messageEdit": True,
    "guildMemberAdd": True,
    "guildMemberRemove": True,
}

# webhook client
webhook = discord.SyncWebhook.from_url(WEBHOOK_URL)

@bot.event
async def on_ready():
    print(f"✅ Logged in as {bot.user}")

@bot.event
async def on_message_delete(message):
    if not log_config["messageDelete"] or message.author.bot:
        return

    embed = discord.Embed(
        title="🗑️ Message Deleted",
        description=f"Message by **{message.author}** in {message.channel.mention}",
        color=discord.Color.red()
    )
    embed.add_field(name="Content", value=message.content or "No content")
    embed.set_footer(text=f"User ID: {message.author.id}")
    embed.timestamp = discord.utils.utcnow()

    webhook.send(embed=embed)

@bot.event
async def on_message_edit(before, after):
    if not log_config["messageEdit"] or before.author.bot:
        return
    if before.content == after.content:
        return

    embed = discord.Embed(
        title="✏️ Message Edited",
        description=f"Message by **{before.author}** in {before.channel.mention}",
        color=discord.Color.orange()
    )
    embed.add_field(name="Before", value=before.content or "No content", inline=False)
    embed.add_field(name="After", value=after.content or "No content", inline=False)
    embed.set_footer(text=f"User ID: {before.author.id}")
    embed.timestamp = discord.utils.utcnow()

    webhook.send(embed=embed)

@bot.event
async def on_member_join(member):
    if not log_config["guildMemberAdd"]:
        return

    embed = discord.Embed(
        title="👋 Member Joined",
        description=f"{member.mention} joined the server.",
        color=discord.Color.green()
    )
    embed.set_thumbnail(url=member.display_avatar.url)
    embed.set_footer(text=f"User ID: {member.id}")
    embed.timestamp = discord.utils.utcnow()

    webhook.send(embed=embed)

@bot.event
async def on_member_remove(member):
    if not log_config["guildMemberRemove"]:
        return

    embed = discord.Embed(
        title="🚪 Member Left",
        description=f"{member} left the server.",
        color=discord.Color.dark_grey()
    )
    embed.set_thumbnail(url=member.display_avatar.url)
    embed.set_footer(text=f"User ID: {member.id}")
    embed.timestamp = discord.utils.utcnow()

    webhook.send(embed=embed)

bot.run(TOKEN)


